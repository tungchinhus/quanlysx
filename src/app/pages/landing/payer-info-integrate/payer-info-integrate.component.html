<div class="payer-info-page">
  <app-heading-page
    title="{{ 'payer-info.payment-ensure-fee' | translate }}"
    subtitle="{{ 'payer-info.payment-info' | translate }}"
  ></app-heading-page>
  <div class="row item total-amount">
    <div class="col-md-8 total">{{'payer-info.payment-amount' | translate}}</div>
    <div class="col-md-3 value"><span class="numb">{{totalAmount | formatCurrency}}</span>VND</div>
  </div>
  <div class="row item">
    <div class="col-12">
      <div>
        <p class="page-title mt-5">{{ 'payer-info.title' | translate }}</p>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="row">
            <div class="col-md-12 col-lg-8">
              <div class="row">
                <div class="col-xl-10 col-md-12">
                  <app-inline-alert [closeButton]="false" *ngIf="isDisplayRelationship">
                    {{ 'relationship-info.alert-message' | translate }}
                  </app-inline-alert> 
                </div>
              </div>
              <div class="row">
                <div class="col-12 payer-form-edit">
                  <div
                    [style.visibility]="isDisableForm && !editMode? 'visible' : 'hidden'" 
                    class="col-xl-3 col-md-1 add-more" (click)="editPayer()">
                    <!-- <img src="assets/icons/Edit.png" alt="" /> -->
                    <p><span class="app-edit-icon"></span>{{ 'button.edit' | translate }}</p>
                  </div>
                  <div class="row">
                    <app-relationship-info
                    [policyInfo]="policyInfo"
                    [relationshipByPolicy]="relationshipByPolicy"
                    [disabledForm]="isDisableForm"
                    (selectedRelationship)="onSelectRelationship($event)"
                    >
                    </app-relationship-info>
                  </div>
                  <div class="row payer-form">
                    <app-payer-form 
                    [disabledForm]="isDisableForm"
                    [payerInfo]="payerInfo"
                    (payerInfoChange)="onPayerInfoChange($event)"
                    (isFormValid)="onFormValid($event)"
                    (isEditButton) ="getEditButton($event)"
                    [cwsIdType] = "cwsIdType"
                    [isShowIcon] = "isShowIcon"
                  ></app-payer-form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="buttons bt-4">
          <button
            [disabled]="!isFormValid"
            mat-flat-button
            color="primary"
            class="small button-full"
            (click)="savePayerInfo()"
            [hidden]="isDisableForm"
          >
            {{ 'button.confirm' | translate }}
          </button>
        </div>
      </div>      
      <div class="row">
        <div class="col-md-8">
          <p class="page-title mt-5">{{ 'payer-integrate.payment-method' | translate }}</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 col-lg-8">
          <app-inline-alert [closeButton]="false">
            <ul style="margin: auto;">
              <li>{{ 'payer-integrate.payment-method-warning1' | translate }}</li>
              <li>{{ 'payer-integrate.payment-method-warning2' | translate }}</li>
              <li>{{ 'payer-integrate.payment-method-warning3' | translate }}</li>
            </ul>
          </app-inline-alert>
        </div>
      </div>
    </div>
  </div>
  <div class="row item">
    <div class="col-md-6">
      <p class="mt-4">{{ 'payer-integrate.payment-choose' | translate }}</p>
    </div>
    <div class="payment-methods">
      <mat-button-toggle-group class="payment-content" *ngIf="!showCardType" name="selectPayment" [value]="paymentMethod" (change)="onPaymentMethodChange($event)">
        <mat-button-toggle value="momo" class="payment-method-card re-width">
          <div class="content">
            <div class="logo">
              <img src="assets/images/momo.png" alt="" />
              <img src="assets/images/momo-white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.momo' | translate }}</div>
          </div>
        </mat-button-toggle>
        <mat-button-toggle value="vnpay" class="payment-method-card">
          <div class="content">
            <div class="logo">
              <img src="assets/images/atm.png" alt="" />
              <img src="assets/images/atm_white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.atm' | translate }}</div>
          </div>
        </mat-button-toggle>
        <mat-button-toggle [disabled] ="isShowCyberCource" value="cybersource"
        [ngClass]="[isShowCyberCource ? 'payment-method-disabled' : 'payment-method-card']"
        >
          <div class="content">
            <div class="logo">
              <img src="assets/images/master.png" alt="" />
              <img src="assets/images/Master_white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.master' | translate }}</div>
          </div>
        </mat-button-toggle>
      </mat-button-toggle-group>
      <mat-button-toggle-group class="payment-content" *ngIf="showCardType" name="selectPayment" [value]="paymentMethod" (change)="onPaymentMethodChange($event)">
        <mat-button-toggle value="momo" class="payment-method-card re-width">
          <div class="content">
            <div class="logo">
              <img src="assets/images/momo.png" alt="" />
              <img src="assets/images/momo-white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.momo' | translate }}</div>
          </div>
        </mat-button-toggle>
        <mat-button-toggle value="vnpay" class="payment-method-card">
          <div class="content">
            <div class="logo">
              <img src="assets/images/atm.png" alt="" />
              <img src="assets/images/atm_white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.atm' | translate }}</div>
          </div>
        </mat-button-toggle>
        <mat-button-toggle [disabled] ="isShowCyberCource" value="001"
        [ngClass]="[isShowCyberCource ? 'payment-method-disabled' : 'payment-method-card']">
          <div class="content">
            <div class="logo">
              <img src="assets/images/Visa.png" alt="" />
              <img src="assets/images/Visa_white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.visa' | translate }}</div>
          </div>
        </mat-button-toggle>
        <mat-button-toggle [disabled] ="isShowCyberCource" value="002"
        [ngClass]="[isShowCyberCource ? 'payment-method-disabled' : 'payment-method-card']"
        >
          <div class="content">
            <div class="logo">
              <img src="assets/images/master.png" alt="" />
              <img src="assets/images/Master_white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.master' | translate }}</div>
          </div>
        </mat-button-toggle>
        <mat-button-toggle [disabled] ="isShowCyberCource" value="007"
        [ngClass]="[isShowCyberCource ? 'payment-method-disabled' : 'payment-method-card']"
        >
          <div class="content">
            <div class="logo">
              <img src="assets/images/JCB.png" alt="" />
              <img src="assets/images/JCB_white.png" class="selected" alt="" />
            </div>
            <div class="name">{{ 'payment-method.jcb' | translate }}</div>
          </div>
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>
    <!-- <div class="col-xl-5 col-md-5 invisible">
      <mat-form-field floatLabel="always">
        <mat-select
        (openedChange)="openedChange($event)"
        placeholder="{{ 'payer-integrate.payment-choose-placeholder' | translate }}"
        (selectionChange)="onPaymentMethodChange($event.value)"
        >
        <ng-container *ngFor="let item of items">
          <mat-option [value]="item.value" (change)="onPaymentMethodChange($event)">      
            <mat-card>      
              <mat-card-content>      
                <img src="{{item.imageurl}}" alt="{{item.label | translate}}">
                {{item.label | translate}}
              </mat-card-content>      
            </mat-card>      
          </mat-option>
        </ng-container>          
        </mat-select>
        <span matSuffix class="app-expand-more"></span>
        <span matSuffix class="app-expand-less"></span>
      </mat-form-field>
    </div> -->
  </div>
  <div class="row item">
    <div class="col-md-12 col-lg-8 confirm-payment">
      <mat-checkbox class="mb-2" [checked]="checkBoxConfirm" (change)="onCheckBoxConfirm($event)">{{
        'payer-integrate.confirm-payment' | translate
      }}</mat-checkbox>
      <ul>
        <li>
          {{ 'payer-integrate.confirm-payment1' | translate }}
        </li>
        <li>
          {{ 'payer-integrate.confirm-payment2' | translate }}
        </li>
      </ul>
      <div class="right-item">
        <div class="item" [ngClass]="{'show': showMore}">
          <p>{{ 'payer-integrate.confirm-payment3' | translate }}</p>
        </div>
        <div class="item quick-link" (click)="showMore = !showMore">
          <!-- <img *ngIf="!showMore" matSuffix src="assets/images/expand_more.svg" alt="" srcset="">
          <img *ngIf="showMore" matSuffix src="assets/images/expand_less.svg" alt="" srcset=""> -->
          <span *ngIf="!showMore" class="app-expand-more show-all"></span>
          <span *ngIf="showMore" class="app-expand-less"></span>
          <span *ngIf="!showMore" class="show-more">{{'payer-integrate.show-more' | translate}}</span>
          <span *ngIf="showMore" class="show-less">{{'payer-integrate.show-less' | translate}}</span>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div>
      <button
        mat-flat-button
        color="primary"
        class="small button-full"
        [disabled]="!isDispayNextButton"
        (click)="initialPayment()">
        {{ 'button.next' | translate }}
      </button>
      <button mat-flat-button color="secondary" class="small button-cancel button-full" (click)="cancelTransaction()">
        {{ 'button.cancel-transaction' | translate }}
      </button>
    </div>
  </div>
</div>
